@baseUrl = http://localhost:3000/api/v1
@contentType = application/json
@email = test_user_02@example.com

### -------------------------------------------------------
### 1. Create User
# @name createUserRequest
POST {{baseUrl}}/users
Content-Type: {{contentType}}

{
    "email": "{{email}}",
    "role": "user",
    "fullName": "Test User 02"
}

### -------------------------------------------------------
### 2. Login
# @name loginRequest
POST {{baseUrl}}/users/login
Content-Type: {{contentType}}

{
    "email": "{{email}}"
}

### -------------------------------------------------------
### 3. Extract User ID
@userId = {{loginRequest.response.body.data.id}}

### -------------------------------------------------------
### 4. Get Todos (Initially Empty)
GET {{baseUrl}}/todos
x-user-id: {{userId}}

### -------------------------------------------------------
### 5. Create Todo 1 (Learn TypeScript)
# @name createTodo1
POST {{baseUrl}}/todos
Content-Type: {{contentType}}
x-user-id: {{userId}}

{
    "title": "Learn TypeScript"
}

### -------------------------------------------------------
### 6. Create Todo 2 (Learn Docker)
# @name createTodo2
POST {{baseUrl}}/todos
Content-Type: {{contentType}}
x-user-id: {{userId}}

{
    "title": "Learn Docker"
}

### -------------------------------------------------------
### 7. Search Todos (Filter by 'Docker')
GET {{baseUrl}}/todos?search=Docker
x-user-id: {{userId}}

### -------------------------------------------------------
### 8. Update Todo 1 (Mark as completed)
@todoId1 = {{createTodo1.response.body.data.id}}
PATCH {{baseUrl}}/todos/{{todoId1}}
Content-Type: {{contentType}}
x-user-id: {{userId}}

{
    "completed": true
}

### -------------------------------------------------------
### 9. Delete Todo 2
@todoId2 = {{createTodo2.response.body.data.id}}
DELETE {{baseUrl}}/todos/{{todoId2}}
x-user-id: {{userId}}

### -------------------------------------------------------
### 10. Get Todos (Verify Todo 2 is deleted)
GET {{baseUrl}}/todos
x-user-id: {{userId}}